[% META title = 'EZ::360 - Create Page' -%]

<script type='text/javascript'>
    function add() {
        if ( document.getElementById('page-list-articles').selectedIndex != -1 ) {
            document.getElementById('page-list-articles-hidden').selectedIndex = document.getElementById('page-list-articles').selectedIndex;

            var option1 = document.createElement('option'); 
            option1.text = document.getElementById('page-list-articles').value;
            document.getElementById('page-added-articles').add( option1, null );

            var option2 = document.createElement('option'); 
            option2.text= document.getElementById('page-list-articles-hidden').value;
            document.getElementById('page-added-articles-hidden').add( option2, null );

            document.getElementById('page-list-articles').remove( document.getElementById('page-list-articles').selectedIndex );
            document.getElementById('page-list-articles-hidden').remove( document.getElementById('page-list-articles-hidden').selectedIndex );
        }
    }

    function remove() {
        if ( document.getElementById('page-added-articles').selectedIndex != -1 ) {
            document.getElementById('page-added-articles-hidden').selectedIndex = document.getElementById('page-added-articles').selectedIndex;

            var option1 = document.createElement('option'); 
            option1.text = document.getElementById('page-added-articles').value;
            document.getElementById('page-list-articles').add( option1, null );

            var option2 = document.createElement('option'); 
            option2.text= document.getElementById('page-added-articles-hidden').value;
            document.getElementById('page-list-articles-hidden').add( option2, null );

            document.getElementById('page-added-articles').remove( document.getElementById('page-added-articles').selectedIndex );
            document.getElementById('page-added-articles-hidden').remove( document.getElementById('page-added-articles-hidden').selectedIndex );
        }
    }
</script>

<form method='post' action='[% c.uri_for("/page/create") %]'>
    <fieldset class='page-create'>
        <legend>Create Page</legend>
        <div class='field page-title'>
            <label for='page-title'>Title:</label>
            <input type='text' name='title' id='page-title' />
        </div>
        <div class='field page-articles'>
            <select class='page-list-articles' id='page-list-articles' size='10'>
                [% FOREACH article IN articles -%]
                <option>[% article.title %]</option>
                [% END -%]
            </select>
            <a class='add' href='javascript:void(0)' onclick='add()' >Add</a>
            <a class='remove' href='javascript:void(0)' onclick='remove()'>Remove</a>
            <select class='page-added-articles' id='page-added-articles' size='10'>
            </select>
        </div>
        <div style='display: none'>
            <select size='10' id='page-list-articles-hidden'>
                [% FOREACH article IN articles -%]
                <option>[% article.id %]</option>
                [% END -%]
            </select>
            <select name='articles' size='10' id='page-added-articles-hidden'>
            </select>
        </div>
        <div class='button page-create'>
            <input type='submit' value='Create Page' />
        </div>
    </fieldset>
</form>
