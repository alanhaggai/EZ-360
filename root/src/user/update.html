[% META title = 'EZ::360 - Update User' -%]

<form method='post' action='[% c.uri_for( "/user/" _ user.id  _ "/update/do" ) %]'>
    <fieldset>
        <legend>Update User</legend>
        <p>
            <label for='user-username'>
                Username:
                <input type='text' name='username' id='user-username' value='[% user.username %]' />
            </label>
        </p>
        <p>
            <label for='user-password'>
                Password:
                <input type='password' name='password' id='user-password' value='' />
            </label>
        </p>
        <p>
            <label for='user-password'>
                Confirm Password:
                <input type='password' name='confirm-password' id='user-confirm-password' value='' />
            </label>
        </p>
        <p>
            <label for='user-email'>
                E-mail:
                <input type='text' name='email' id='user-email' value='[% user.email %]' />
            </label>
        </p>
        <p>
            <label for='user-realname'>
                Real Name:
                <input type='text' name='realname' id='user-realname' value='[% user.realname %]' />
            </label>
        </p>
        <fieldset>
            <legend>Roles</legend>
            [% WHILE ( role = roles_rs.next() ) -%]
                [% FOR user_role IN user.roles -%]
                    [% role_status = undef -%]
                    [% IF role.role == user_role.role -%]
                        [% role_status = ' checked=\'checked\'' -%]
                        [% LAST -%]
                    [% END -%]
                [% END -%]
                <input type='checkbox' name='[% role.role %]'[% role_status %] />[% role.role.replace( '-', ' ' ) %]<br />
            [% END -%]
        </fieldset>
    </fieldset>
    <p>
        <input type='submit' value='Update User' />
    </p>
</form>
